# 视频监控系统软件设计文档

**版本**：V1.0  
**日期**：2024-06-25  

**合肥工业大学计算机与信息学院  
DSP实验室**

---

## 1. 变更历史

| 编号 | 版本 | 修改内容 | 修改人 | 日期 |
| ---- | ---- | -------- | ------ | ---- |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |

---

## 2. 前言

### 2.1 目的

### 2.2 范围

### 2.3 文档约定

---

## 3. 设计目标

### 3.1 需求背景

### 3.2 整体目标

### 3.3 分解目标

### 3.4 平台接入

### 3.5 视频分析处理

### 3.6 存储及告警上报

### 3.7 自服务门户

### 3.8 能力开放

---

## 4. 总体架构设计

### 4.1 软件架构设计

---

## 5. 系统功能设计

### 5.1 用户登录

| 功能描述 | 具有用户身份验证、记住登录状态、忘记密码、以及用户注销功能。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 用户管理                                                     |
| 权限配置 | 所有用户                                                     |

#### 5.1.1 功能说明

1. 用户登录：
   1. 用户输入用户名和密码进行身份验证。
   2. 验证成功后，允许用户访问系统。
2. 记住我：
   1. 提供“记住我”选项，用户可以选择记住登录状态，方便下次自动登录。
3. 忘记密码：
   1. 提供忘记密码链接，用户可以通过邮箱重置密码。
4. 注销：
   1. 提供注销按钮，用户点击后退出登录状态。

#### 5.1.2 界面说明

1. 界面按钮：
   1. 登录：提交用户名和密码进行登录。
   2. 记住我：选择是否在本地保存登录信息，方便下次自动登录。
   3. 忘记密码：点击后进入密码重置流程。
   4. 注销：点击后注销当前用户。
2. 表单展现：
   1. 登录表单：包含用户名和密码输入框。
   2. 密码重置表单：包含用户名或邮箱输入框，用于发送密码重置链接。
3. 提示信息：
   1. 登录失败提示：当用户名或密码错误时，显示错误提示信息。
   2. 密码重置成功提示：当密码重置链接发送成功时，显示提示信息。

#### 5.1.3 Java接口

```java
public interface UserAuthentication {
    boolean login(String username, String password);
    void logout();
    boolean resetPassword(String emailOrUsername);
    boolean validateResetToken(String token);
    boolean changePassword(String token, String newPassword);
}
```

#### 5.1.4 数据库表设计

**Users**:

- id (PK INT AUTO_INCREMENT)
- username (VARCHAR(255))
- password (VARCHAR(255)) // 存储加密后的密码
- email (VARCHAR(255))
- created_at (DATETIME)
- updated_at (DATETIME)

**Password_reset_tokens**:

- id (PK INT AUTO_INCREMENT)
- user_id (FK INT)
- token (VARCHAR(255))
- expires_at (DATETIME)
- created_at (DATETIME)

### 5.2 用户列表维护

| 功能描述 | 具有增加、删除、刷新用户列表的功能 |
| -------- | ---------------------------------- |
| 涉及模块 | 用户管理                           |
| 权限配置 | 操作员、系统管理员                 |

#### 5.2.1 功能说明

1. 增加用户列表功能：可以通过输入用户名、密码、邮箱等信息，添加新的用户到系统。新用户添加后会获取用户ID、用户名、角色等信息。
2. 删除用户列表功能：删除已添加的用户及其相关信息。确保在删除前会有确认提示，以防误删。
3. 更新用户列表功能：当用户信息（如邮箱、角色）发生改变时，可以通过更新同步信息。

#### 5.2.2 界面说明

1. 界面按钮：
   1. 增加用户：添加新的用户到系统。
   2. 删除用户：删除选中的用户。
   3. 刷新用户列表：同步系统中用户的最新信息。
2. 列表展现：
   1. 展现所有用户列表，包括用户名、邮箱、角色、创建时间等信息。
   2. 用户列表可以分页显示。
3. 排序方式：
   1. 默认排序方式根据用户名首字母升序排列。
   2. 其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

### 5.3 角色管理

| 功能描述 | 具有增加、删除、更新角色的功能，并能为角色配置权限。 |
| -------- | ---------------------------------------------------- |
| 涉及模块 | 权限管理                                             |
| 权限配置 | 系统管理员                                           |

#### 5.3.1 功能说明

1. 增加角色功能：可以通过输入角色名称和描述，添加新的角色到系统。为新角色配置相应的权限。
2. 删除角色功能：删除已添加的角色。确保在删除前会有确认提示，以防误删。
3. 更新角色功能：当角色信息（如名称、描述、权限）发生改变时，可以通过更新同步信息。
4. 角色可分为：系统管理员（System Administrator）、管理员（Security Administrator）、操作员（Operator）。

#### 5.3.2 界面说明

1. 界面按钮：
   1. 增加角色：添加新的角色到系统。
   2. 删除角色：删除选中的角色。
   3. 更新角色：更新选中角色的信息。
2. 列表展现：
   1. 展现所有角色列表，包括角色名称、描述、创建时间等信息。
   2. 角色列表可以分页显示。
3. 排序方式：
   1. 默认排序方式根据角色名称首字母升序排列。
   2. 其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

### 5.4 系统设置

| 功能描述 | 具有配置系统参数、进行备份和恢复、管理时间和日期设置的功能。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 系统管理                                                     |
| 权限配置 | 系统管理员                                                   |

#### 5.4.1 功能说明

1. 配置系统参数：
   1. 配置系统的基本参数，包括系统名称、语言设置、时区等。
   2. 配置与其他系统的集成参数，如API密钥、URL等。
2. 备份和恢复：
   1. 定期备份系统数据，确保数据安全。
   2. 在需要时从备份中恢复系统数据。
3. 管理时间和日期设置：
   1. 配置系统时间和日期格式。
   2. 同步系统时间与标准时间服务器。

#### 5.4.2 界面说明

1. 界面按钮：
   1. 配置参数：设置和保存系统参数。
   2. 备份系统：手动备份系统数据。
   3. 恢复系统：从备份中恢复系统数据。
   4. 设置时间：配置系统时间和日期格式，进行时间同步。
2. 列表展现：
   1. 展现当前系统参数的列表，包括参数名称、当前值、描述等信息。
   2. 展现备份历史记录，包括备份时间、备份名称、备份状态等。
3. 排序方式：
   1. 默认排序方式根据参数名称首字母升序排列。
   2. 其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

### 5.5 摄像头列表维护

| 功能描述 | 具有增加、删除、刷新账号下摄像头列表功能 |
| -------- | ---------------------------------------- |
| 涉及模块 | 系统管理                                 |
| 权限配置 | 操作员、系统管理员                       |
