视频监控系统



**软件设计文档**





**版本：****V1.0**

**日期：****2024-06-25**











**合肥工业大学计算机与信息学院**

**DSP****实验室**







变更历史

| 编号 | 版本 | 修改内容 | 修改人 | 日期 |
| ---- | ---- | -------- | ------ | ---- |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |
|      |      |          |        |      |

























1. **前言**

2. 1. ​	1.1.目的
   2. ​	1.2.范围
   3. ​	1.3.文档约定



1. **设计目标**

2. 1. ​	2.1.需求背景

   2. ​	2.2.整体目标

   3. ​	2.3.分解目标

   4. 1. ​	2.3.1.平台接入
      2. ​	2.3.2.视频分析处理
      3. ​	2.3.3.存储及告警上报
      4. ​	2.3.4.自服务门户
      5. ​	2.3.5.能力开放



1. **总体架构设计**

2. 1. ​	3.1.软件架构设计

**![pastedGraphic.png](blob:file:///4bbd14cc-ff24-447d-a0ad-1511a90a96d5)**



1. **系统功能设计**



1. 1. ​	4.1.用户登陆

| 功能描述 | 具有用户身份验证、记住登录状态、忘记密码、以及用户注销功能。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 用户管理                                                     |
| 权限配置 | 所有用户                                                     |



● 功能说明 

1、用户登录：

1.1、用户输入用户名和密码进行身份验证。

1.2、验证成功后，允许用户访问系统。

2、记住我：

2.1、提供“记住我”选项，用户可以选择记住登录状态，方便下次自动登录。

3、忘记密码：

3.1、提供忘记密码链接，用户可以通过邮箱重置密码。

4、注销：

4.1、提供注销按钮，用户点击后退出登录状态。



● 界面说明

1、界面按钮：

1.1、登录：提交用户名和密码进行登录。

1.2、记住我：选择是否在本地保存登录信息，方便下次自动登录。

1.3、忘记密码：点击后进入密码重置流程。

1.4、注销：点击后注销当前用户。

2、表单展现：

2.1、登录表单：包含用户名和密码输入框。

2.2、密码重置表单：包含用户名或邮箱输入框，用于发送密码重置链接。

3、提示信息：

3.1、登录失败提示：当用户名或密码错误时，显示错误提示信息。

3.2、密码重置成功提示：当密码重置链接发送成功时，显示提示信息。



● Java接口：

public interface UserAuthentication {

  boolean login(String username, String password);

  void logout();

  boolean resetPassword(String emailOrUsername);

  boolean validateResetToken(String token);

  boolean changePassword(String token, String newPassword);

}



● 数据库表设计

Users:

id (PK, INT, AUTO_INCREMENT)

username (VARCHAR(255))

password (VARCHAR(255)) // 存储加密后的密码

email (VARCHAR(255))

created_at (DATETIME)

updated_at (DATETIME)



Password_reset_tokens:

id (PK, INT, AUTO_INCREMENT)

user_id (FK, INT)

token (VARCHAR(255))

expires_at (DATETIME)

created_at (DATETIME)

1. 1. 用户列表维护

| 功能描述 | 具有增加、删除、刷新用户列表的功能 |
| -------- | ---------------------------------- |
| 涉及模块 | 用户管理                           |
| 权限配置 | 操作员、系统管理员                 |



● 功能说明 

1、增加用户列表功能：可以通过输入用户名、密码、邮箱等信息，添加新的用户到系统。新用户添加后会获取用户ID、用户名、角色等信息。

2、删除用户列表功能：删除已添加的用户及其相关信息。确保在删除前会有确认提示，以防误删。

3、更新用户列表功能：当用户信息（如邮箱、角色）发生改变时，可以通过更新同步信息。



● 界面说明

1、界面按钮：

1.1、增加用户：添加新的用户到系统。

1.2、删除用户：删除选中的用户。

1.3、刷新用户列表：同步系统中用户的最新信息。

2、列表展现：

2.1、展现所有用户列表，包括用户名、邮箱、角色、创建时间等信息。

2.2.、用户列表可以分页显示。

3、排序方式：

3.1、默认排序方式根据用户名首字母升序排列。

3.2、其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

注意：操作员在添加用户时只能一次添加一个，确保每个用户信息的准确录入。

1. 1. 角色管理

| 功能描述 | 具有增加、删除、更新角色的功能，并能为角色配置权限。 |
| -------- | ---------------------------------------------------- |
| 涉及模块 | 权限管理                                             |
| 权限配置 | 系统管理员                                           |



● 功能说明

1、增加角色功能：可以通过输入角色名称和描述，添加新的角色到系统。为新角色配置相应的权限。

2、删除角色功能：删除已添加的角色。确保在删除前会有确认提示，以防误删。

3、更新角色功能：当角色信息（如名称、描述、权限）发生改变时，可以通过更新同步信息。

4、角色可分为：系统管理员（System Administrator）、管理员（Security Administrator）、操作员（Operator）。



● 界面说明

1、界面按钮：

1.1、增加角色：添加新的角色到系统。

1.2、删除角色：删除选中的角色。

1.3、更新角色：更新选中角色的信息。

2、列表展现：

2.1、展现所有角色列表，包括角色名称、描述、创建时间等信息。

2.2、角色列表可以分页显示。

3、排序方式：

3.1、默认排序方式根据角色名称首字母升序排列。

3.2、其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

1. 1. 系统设置

| 功能描述 | 具有配置系统参数、进行备份和恢复、管理时间和日期设置的功能。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 系统管理                                                     |
| 权限配置 | 系统管理员                                                   |

● 功能说明

1、配置系统参数：

1.1、配置系统的基本参数，包括系统名称、语言设置、时区等。

1.2、配置与其他系统的集成参数，如API密钥、URL等。

2、备份和恢复：

2.1、定期备份系统数据，确保数据安全。

2.2、在需要时从备份中恢复系统数据。

3、管理时间和日期设置：

3.1、配置系统时间和日期格式。

3.2、同步系统时间与标准时间服务器。

● 界面说明

界面按钮：

配置参数：设置和保存系统参数。

备份系统：手动备份系统数据。

恢复系统：从备份中恢复系统数据。

设置时间：配置系统时间和日期格式，进行时间同步。

列表展现：

展现当前系统参数的列表，包括参数名称、当前值、描述等信息。

展现备份历史记录，包括备份时间、备份名称、备份状态等。

排序方式：

默认排序方式根据参数名称首字母升序排列。

其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。

1. 1. 摄像头列表维护

| 功能描述 | 具有增加、删除、刷新账号下摄像头列表功能 |
| -------- | ---------------------------------------- |
| 涉及模块 |                                          |
| 权限配置 | 操作员、系统管理员                       |



● 功能说明 

1、增加摄像头列表功能：可根据平台 IP 地址、账号及密码，绑定相应账号下的摄像头列表，并获取摄像头ID、名称、预置位等信息。 

2、删除摄像头列表功能：删除已绑定的千里眼账号及其名下所有摄像头信息。

3、更新摄像头列表功能：若平台上摄像头或预置位信息发生改变，可以通过更新进行信息同步。



● 界面说明

1、界面按钮：增加账号、删除账号、刷新对应账号下的摄像头列表。

2、列表展现：展现绑定账号列表，主要包括智能分析凭条账号名、归属地市，绑定账号的账号名、认证服务器 IP、账号算法用途。 

3、排序方式：默认排序方式根据归属地市首字母升序排列。其他排序方式可点击相应字段后面的排序按钮，进行对应字段首字母的升序或降序排列。 

注意：操作员一次只能添加一个账号。

1. 1. 任务调度

| 功能描述 | 具有创建、删除、修改和执行任务的功能，能够调度和管理系统中的定时任务。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 任务管理                                                     |
| 权限配置 | 操作员、系统管理员                                           |

● 功能说明 

1、创建任务：

1.1、用户可以创建新的定时任务，设置任务名称、执行时间、任务类型等参数。

1.2、新任务可以立即生效并按照设定的时间执行。

2、删除任务：

2.1、用户可以删除指定的定时任务。

2.2、被删除的任务将不再被执行。

3、修改任务：

3.1、用户可以修改已有任务的参数，例如执行时间、任务类型等。

3.2、修改后的任务将按照新的参数执行。

4、执行任务：

4.1、用户可以手动触发任务执行。

4.2、提供立即执行功能，允许用户在不等待定时的情况下立即执行任务。

● 界面说明

1、界面按钮：

1.1、创建任务：打开新增任务表单，输入任务信息并提交。

1.2、删除任务：选中一个或多个任务，点击删除按钮，确认后删除任务。

1.3、修改任务：选中一个任务，点击修改按钮，编辑任务信息并提交。

1.4、执行任务：选中一个任务，点击执行按钮，立即执行任务。

2、列表展现：

2.1、显示任务列表，包括任务名称、执行时间、任务类型、状态等信息。

2.2、支持根据任务名称、执行时间等字段排序和搜索。

1. 1. AI视频分析任务

   2. 1. 行人重识别界面功能

| 功能描述 | 行人重识别界面提供了配置行人重识别算法、查看行人识别结果和管理识别任务的功能。 |
| -------- | ------------------------------------------------------------ |
| 涉及模块 | 算法管理                                                     |
| 权限配置 | 操作员、系统管理员                                           |



● 功能说明 

1、算法配置

1.1、设置和调整行人重识别算法的参数。

1.2、启动和停止行人重识别算法。

2、行人识别结果查看

2.1、实时显示识别到的行人及其匹配信息。

2.2、查看行人历史记录和识别结果。

2.3、显示行人的匹配图像、时间、位置等详细信息。

3、识别任务管理

3.1、创建新的识别任务，包括选择监控摄像头和设置识别条件。

3.2、查看和管理当前运行的识别任务。

3.3、删除或编辑识别任务。

4、识别记录导出

4.1、将识别记录导出为CSV或Excel文件，方便后续分析。

5、日志和报表：

5.1、查看行人重识别的日志记录。

5.2、生成和查看识别统计报表。



● 界面说明

1. 界面按钮

1.1、配置算法：打开算法配置窗口，设置和保存算法参数。

1.2、启动算法：启动行人重识别算法。

1.3、停止算法：停止行人重识别算法。

1.4、新建任务：创建新的识别任务。

1.5、删除任务：删除选中的识别任务。

1.6、导出记录：将识别记录导出为文件。

1.7、生成报表：生成识别统计报表。

2、列表展现：

2.1、识别结果列表：展示所有识别到的行人，包括识别时间、位置、匹配图像、相似度等信息。

2.2、任务列表：展示当前所有识别任务，包括任务名称、监控摄像头、状态等信息。

3、图表展示：

3.1、识别结果的统计图表，如识别频率、识别准确率等。

4、排序和过滤：

4.1、识别结果和任务列表可以根据时间、相似度、位置等字段进行排序和过滤。
